<!DOCTYPE html>
<html ng-app='battlescript'>
<head>
  <meta charset="utf-8" />
  <title>BattleScript</title>
  <link rel="stylesheet" href="lib/CodeMirror/lib/codemirror.css">
  <link rel="stylesheet" href="lib/CodeMirror/theme/material.css">
  <link rel="stylesheet" href="assets/css/animate.min.css">
  <link rel="stylesheet" href="assets/css/style.css">

  <script src="/socket.io/socket.io.js"></script>

  <script src="lib/CodeMirror/lib/codemirror.js"></script>
  <script src="lib/CodeMirror/mode/javascript/javascript.js"></script>
  <script src="lib/marked/marked.min.js"></script>
  <script src="lib/underscore/underscore-min.js"></script>
  <script src="lib/angular/angular.min.js"></script>
  <script src="lib/angular-ui-router/release/angular-ui-router.min.js"></script>
  <script src="lib/angular-sanitize/angular-sanitize.min.js"></script>
  <script type="text/javascript" src="https://cdn.icecomm.io/icecomm.js"></script>
  <script>
  var comm = new Icecomm('wRHqiZLmDMX6RnLrm2O04ouIqqxd0MiQpVpaAIDz5cPS0ta');

  comm.connect('custom room');

  comm.on('connected', function(peer) {
     // document.body.appendChild(peer.getVideo());
     var node = document.createElement("video");
     var attr1 = document.createAttribute("class");
      attr1.value = "peer";
     var attr2 = document.createAttribute("id");
      attr2.value = peer.ID;
     var attr3 = document.createAttribute("autoplay");

     document.getElementById("peer").appendChild(node);
     node.setAttributeNode(attr1);
     node.setAttributeNode(attr2);
     node.setAttributeNode(attr3);
     
     var remoteVid = document.getElementById(peer.ID);
     remoteVid.src = peer.stream;
     // console.log('peer remote>>>', peer);
     // console.log('peer.ID remote>>>', document.getElementById(peer.ID));
     // console.log(peer.ID, peer.stream);
  });

  comm.on('local', function(peer) {
    console.log('localVideo>>>', localVideo);
    console.log('localVideo.src>>>', localVideo.src);
    console.log('peer.stream>>>', peer.stream);
    console.log('peer local>>>', peer);
    localVideo.src = peer.stream;
  });

  comm.on('disconnect', function(peer) {
    document.getElementById(peer.ID).remove();
  });
  </script>
</head>
<body>
<div ui-view></div>

<script src="app/directives/directives.js"></script>
<script src="app/services/services.js"></script>
<script src="app/auth/auth.js"></script>
<script src="app/home/home.js"></script>
<script src="app/dashboard/dashboard.js"></script>
<script src="app/battle/battle.js"></script>
<script src="app/app.js"></script>
</body>
</html>
